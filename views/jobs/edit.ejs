<%- include('../partials/header') %>

<div class="container" style="max-width: 800px;">
    <div class="glass" style="padding: 3rem;">
        <h2 style="margin-bottom: 2rem;">Edit Job</h2>

        <% if (locals.error) { %>
            <div class="error-msg"><%= error %></div>
        <% } %>

        <form action="/jobs/<%= jobId %>/edit" method="POST">
            <div class="form-group">
                <label for="title">Job Title</label>
                <input type="text" name="title" id="title" class="input-field" value="<%= job.title %>" required>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                <div class="form-group">
                    <label for="company">Company Name</label>
                    <input type="text" name="company" id="company" class="input-field" value="<%= job.company %>" required>
                </div>
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" name="location" id="location" class="input-field" value="<%= job.location %>" required>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                <div class="form-group">
                    <label for="type">Job Type</label>
                    <select name="type" id="type" class="input-field" required>
                        <option value="Full-time" <%= job.type === 'Full-time' ? 'selected' : '' %>>Full-time</option>
                        <option value="Part-time" <%= job.type === 'Part-time' ? 'selected' : '' %>>Part-time</option>
                        <option value="Contract" <%= job.type === 'Contract' ? 'selected' : '' %>>Contract</option>
                        <option value="Freelance" <%= job.type === 'Freelance' ? 'selected' : '' %>>Freelance</option>
                        <option value="Internship" <%= job.type === 'Internship' ? 'selected' : '' %>>Internship</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="category">Category</label>
                    <select name="category" id="category" class="input-field" required>
                        <option value="Technology" <%= job.category === 'Technology' ? 'selected' : '' %>>Technology</option>
                        <option value="Marketing" <%= job.category === 'Marketing' ? 'selected' : '' %>>Marketing</option>
                        <option value="Finance" <%= job.category === 'Finance' ? 'selected' : '' %>>Finance</option>
                        <option value="Design" <%= job.category === 'Design' ? 'selected' : '' %>>Design</option>
                        <option value="Customer Service" <%= job.category === 'Customer Service' ? 'selected' : '' %>>Customer Service</option>
                    </select>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                <div class="form-group">
                    <label for="salary">Salary Range</label>
                    <input type="text" name="salary" id="salary" class="input-field" value="<%= job.salary %>" required>
                </div>
                <div class="form-group">
                    <label for="experience">Experience Level</label>
                    <input type="text" name="experience" id="experience" class="input-field" value="<%= job.experience %>" required>
                </div>
            </div>

            <div class="form-group">
                <label for="status">Job Status</label>
                <select name="status" id="status" class="input-field">
                    <option value="Open" <%= job.status === 'Open' ? 'selected' : '' %>>Open</option>
                    <option value="Closed" <%= job.status === 'Closed' ? 'selected' : '' %>>Closed</option>
                </select>
            </div>

            <div class="form-group">
                <label for="description">Job Description</label>
                <textarea name="description" id="description" rows="6" class="input-field" required><%= job.description %></textarea>
            </div>

            <div class="form-group">
                <label for="requirements">Requirements (comma separated)</label>
                <textarea name="requirements" id="requirements" rows="3" class="input-field" required><%= Array.isArray(job.requirements) ? job.requirements.join(', ') : job.requirements %></textarea>
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <button type="submit" class="btn btn-primary" style="flex: 1;">Update Job</button>
                <a href="/dashboard" class="btn btn-outline">Cancel</a>
            </div>
        </form>
    </div>
</div>

<%- include('../partials/footer') %>
