<%- include('../partials/header') %>

<h2 class="mb-20">My Orders</h2>

<% if (orders.length > 0) { %>
    <% orders.forEach(order => { %>
        <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px;">
                <div>
                    <strong>Order ID:</strong> <span style="font-family: monospace; color: #666;"><%= order._id %></span><br>
                    <small>Placed on: <%= new Date(order.createdAt).toLocaleDateString() %></small>
                </div>
                <div>
                    <span class="badge badge-<%= order.status === 'Pending' ? 'pending' : (order.status === 'Shipped' ? 'shipped' : 'delivered') %>">
                        <%= order.status %>
                    </span>
                </div>
            </div>
            
            <div style="margin-bottom: 15px;">
                <% order.items.forEach(item => { %>
                    <p>â€¢ <%= item.quantity %>x Book (ID: <%= item.book %>) - $<%= item.price %></p> 
                    <!-- ideally populate book details, but keeping simple for list view -->
                <% }) %>
            </div>
            
            <div style="display: flex; justify-content: flex-end;">
                <strong>Total Amount: $<%= order.totalAmount.toFixed(2) %></strong>
            </div>
        </div>
    <% }) %>
<% } else { %>
    <p>You have no orders yet.</p>
<% } %>

<%- include('../partials/footer') %>
