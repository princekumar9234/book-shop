<%- include('../partials/header') %>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h2>All Books</h2>
    <form action="/books" method="GET" style="display: flex; gap: 10px;">
        <input type="text" name="search" placeholder="Search by title..." value="<%= typeof search !== 'undefined' ? search : '' %>" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
        <button type="submit" class="btn btn-secondary">Search</button>
    </form>
</div>

<div class="book-grid">
    <% if (books.length > 0) { %>
        <% books.forEach(book => { %>
            <div class="book-card">
                <div class="book-image">
                    <img src="<%= book.image %>" alt="<%= book.title %>" onerror="this.src='https://via.placeholder.com/300x400?text=No+Image'">
                </div>
                <div class="book-info">
                    <h3 class="book-title"><%= book.title %></h3>
                    <p class="book-author">by <%= book.author %></p>
                    <p style="margin-bottom: 10px; font-size: 0.9rem; color: #777;"><%= book.category %></p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="book-price">$<%= book.price.toFixed(2) %></span>
                        <a href="/books/<%= book._id %>" class="btn btn-secondary" style="font-size: 0.9rem;">View Details</a>
                    </div>
                </div>
            </div>
        <% }) %>
    <% } else { %>
        <p>No books found matching your criteria.</p>
    <% } %>
</div>

<%- include('../partials/footer') %>
